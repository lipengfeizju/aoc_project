<?xml version="1.0" encoding="ISO-8859-15"?>
<launch>
  <arg name="ns"          default="scarab40"/>
  <arg name="map_topic"   default="map"/>
  <arg name="odom_topic"  default="odom"/>
  <arg name="scan_topic"  default="scan" />
  <arg name="pose_topic"  default="pose" />
  <arg name="base_frame"  default="base_footprint"/>
  <arg name="map_frame"   default="map"/>
  <arg name="goal_topic" default="/goal"/>
  


<group ns="$(arg ns)">
  <!-- publish robot pose -->
  <node name="dummy_slam" pkg="tf" type="static_transform_publisher"
    args="0.0 0.0 0.0 0.0 0.0 0.0 map $(arg ns)/odom 100" />
  <node name="pose_stamped" pkg="hfn" type="tf_posestamped_node.py" >
    <param name="base_frame_id" value="$(arg ns)/$(arg base_frame)" />
    <param name="map_frame_id" value="$(arg map_frame)" />
    <remap from="pose" to="$(arg pose_topic)" />
  </node>


  <!-- topics publised:
    /move/cancel
    /move/feedback
    /move/goal
    /move/result
    /move/status -->
  <node name="goal_to_action" pkg="hfn" type="goal_to_action.py">
    <remap from="goal" to="$(arg goal_topic)" />
    <!--<param name="goal_topic" value="$(arg goal_topic)"/>-->
  </node>

  <!-- TOPICS SUBSCRIBED:
    /pose
    /map
    /scan
    /odom
    /move/...
  -->
  <!-- TOPICS PUBLISED:
    /path
    /marker
    /cmd_vel
    /inflated_scan
    /costmap
  -->
  <node name="navigation" pkg="hfn" type="hfn"
        respawn="false" output="screen" launch-prefix="" >
        <param name="base_frame_id" value="$(arg ns)/$(arg base_frame)" />
    <param name="map_frame_id" value="$(arg map_frame)" />

    <param name="cost_occ_prob" value="0.7" />
    <param name="cost_occ_dist" value="0.7" />
    <param name="max_occ_dist" value="1.0" />
    <param name="lethal_occ_dist" value="0.2" />

    <param name="axle_width" value="0.255" />
    <param name="robot_radius" value="0.3" />
    <param name="safety_margin" value="0.1" />
    <param name="social_margin" value="0.2" />

    <remap from="map" to="/$(arg map_topic)" />
    <remap from="odom" to="$(arg odom_topic)" />
    <remap from="scan" to="$(arg scan_topic)" />
    <remap from="pose" to="$(arg pose_topic)" />

    <remap from="cmd_vel" to="mobile_base/commands/velocity" />
  </node>
</group>
</launch>
